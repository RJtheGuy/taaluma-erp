{% extends 'admin/base_site.html' %}

{% block content %}
<div style="padding: 20px; max-width: 900px;">
    <h1>üì§ Bulk Upload Stock Records</h1>
    
    <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #2196f3;">
        <h3 style="margin-top: 0;">üìã CSV Format Required</h3>
        <p><strong>Your CSV file must have these columns (exact names):</strong></p>
        <pre style="background: white; padding: 15px; border-radius: 5px; overflow-x: auto;">sku,warehouse,quantity,reorder_level
WINE-001,Ethnic World Padova,45,10
WINE-001,Ethnic World Vicenza,32,10
WINE-002,Ethnic World Padova,67,15
BEER-001,Ethnic World Conegliano,120,20</pre>
        
        <h4>Column Descriptions:</h4>
        <ul style="line-height: 1.8;">
            <li><strong>sku</strong> - Product SKU (must exist in products)</li>
            <li><strong>warehouse</strong> - Warehouse name (must match existing warehouse)</li>
            <li><strong>quantity</strong> - Current stock quantity</li>
            <li><strong>reorder_level</strong> - Alert when stock falls below this (optional, default 10)</li>
        </ul>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">
        <h4 style="margin-top: 0;">üí° Important Notes</h4>
        <ul style="line-height: 1.8;">
            <li>Products must be uploaded BEFORE uploading stock</li>
            <li>Warehouse names must match exactly (partial match is okay)</li>
            <li>If stock record exists, quantity will be UPDATED (not added)</li>
            <li>One product can have stock in multiple warehouses</li>
        </ul>
    </div>
    
    <form method="post" enctype="multipart/form-data" style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        {% csrf_token %}
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; font-weight: bold; margin-bottom: 10px; font-size: 16px;">
                Select CSV File:
            </label>
            <input type="file" name="csv_file" accept=".csv" required 
                   style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; width: 100%; font-size: 14px;">
        </div>
        
        <div style="display: flex; gap: 15px; margin-top: 30px;">
            <button type="submit" 
                    style="background: #4caf50; color: white; padding: 12px 30px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold;">
                üì§ Upload Stock Records
            </button>
            
            <a href="{% url 'admin:inventory_stock_changelist' %}" 
               style="background: #757575; color: white; padding: 12px 30px; border-radius: 5px; text-decoration: none; display: inline-block; font-size: 16px; font-weight: bold;">
                ‚Üê Cancel
            </a>
        </div>
    </form>
    
    <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin-top: 30px;">
        <h3>üì• Sample CSV File</h3>
        
        <pre style="background: white; padding: 15px; border-radius: 5px; margin-top: 10px; font-size: 12px;">sku,warehouse,quantity,reorder_level
WINE-BAR-2015,Ethnic World Padova,25,5
WINE-BAR-2015,Ethnic World Vicenza,18,5
WINE-BAR-2015,Ethnic World Conegliano,12,5
WINE-CHI-2018,Ethnic World Padova,45,10
WINE-PRO-2023,Ethnic World Padova,67,15
WINE-PRO-2023,Ethnic World Vicenza,52,15
BEER-IPA-001,Ethnic World Conegliano,120,20
BEER-LAG-001,Ethnic World Conegliano,98,20
TEX-SARI-BLU,Ethnic World Padova,33,8
FOOD-RICE-5KG,Ethnic World Padova,156,30</pre>
        
        <div style="margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 5px;">
            <strong>‚úÖ Pro Tip:</strong> Export your current stock to see the format, then modify the quantities and re-upload!
        </div>
    </div>
</div>

<style>
    button:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        transition: all 0.2s;
    }
    
    a:hover {
        opacity: 0.9;
    }
</style>
{% endblock %}
