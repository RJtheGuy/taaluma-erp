{% extends 'admin/base_site.html' %}

{% block extrastyle %}
<style>
    /* ========================================
       DARK MODE / LIGHT MODE RESPONSIVE STYLES
       ======================================== */
    
    /* Light Mode (Default) */
    :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --bg-info: #e3f2fd;
        --bg-warning: #fff3cd;
        --text-primary: #333333;
        --text-secondary: #666666;
        --border-color: #ddd;
        --input-bg: #ffffff;
        --input-border: #ddd;
        --input-text: #333;
        --code-bg: #ffffff;
        --code-border: #e0e0e0;
    }
    
    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
        :root {
            --bg-primary: #1e1e1e;
            --bg-secondary: #2d2d2d;
            --bg-info: #1a3a52;
            --bg-warning: #3d3414;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: #444;
            --input-bg: #2d2d2d;
            --input-border: #444;
            --input-text: #e0e0e0;
            --code-bg: #2d2d2d;
            --code-border: #444;
        }
    }
    
    /* Container */
    .upload-container {
        padding: 20px;
        max-width: 900px;
        background: var(--bg-primary);
        color: var(--text-primary);
    }
    
    .upload-container h1 {
        color: var(--text-primary);
        margin-bottom: 20px;
    }
    
    /* Info Box */
    .info-box {
        background: var(--bg-info);
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #2196f3;
    }
    
    .info-box h3 {
        margin-top: 0;
        color: #2196f3;
    }
    
    .info-box p,
    .info-box ul,
    .info-box li {
        color: var(--text-primary);
    }
    
    /* Warning Box */
    .warning-box {
        background: var(--bg-warning);
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #ffc107;
    }
    
    .warning-box h4 {
        margin-top: 0;
        color: #f57c00;
    }
    
    .warning-box ul,
    .warning-box li {
        color: var(--text-primary);
    }
    
    /* Code Block */
    pre {
        background: var(--code-bg);
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        border: 1px solid var(--code-border);
        color: var(--text-primary);
        font-family: 'Courier New', monospace;
    }
    
    /* Form Container */
    .form-container {
        background: var(--bg-secondary);
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        margin: 20px 0;
    }
    
    /* Form Label */
    .form-group label {
        display: block;
        font-weight: bold;
        margin-bottom: 10px;
        font-size: 16px;
        color: var(--text-primary);
    }
    
    /* File Input */
    .form-group input[type="file"] {
        padding: 10px;
        border: 2px solid var(--input-border);
        border-radius: 5px;
        width: 100%;
        font-size: 14px;
        background: var(--input-bg);
        color: var(--input-text);
        cursor: pointer;
    }
    
    .form-group input[type="file"]:hover {
        border-color: #2196f3;
    }
    
    .form-group input[type="file"]:focus {
        outline: none;
        border-color: #2196f3;
        box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
    }
    
    /* Buttons */
    .button-group {
        display: flex;
        gap: 15px;
        margin-top: 30px;
    }
    
    .btn-submit {
        background: #4caf50;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.2s;
    }
    
    .btn-submit:hover {
        background: #45a049;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
    }
    
    .btn-cancel {
        background: #757575;
        color: white;
        padding: 12px 30px;
        border-radius: 5px;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        font-weight: bold;
        transition: all 0.2s;
    }
    
    .btn-cancel:hover {
        background: #616161;
        transform: translateY(-1px);
        text-decoration: none;
        color: white;
    }
    
    /* Examples Section */
    .examples-section {
        background: var(--bg-secondary);
        padding: 20px;
        border-radius: 8px;
        margin-top: 30px;
    }
    
    .examples-section h3 {
        color: var(--text-primary);
        margin-bottom: 15px;
    }
    
    .examples-section p {
        color: var(--text-secondary);
    }
    
    .examples-section strong {
        color: var(--text-primary);
    }
    
    /* Column Descriptions List */
    .info-box ul {
        line-height: 1.8;
        padding-left: 20px;
    }
    
    .info-box li strong {
        color: #2196f3;
    }
    
    .warning-box ul {
        line-height: 1.8;
        padding-left: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="upload-container">
    <h1>üì§ Bulk Upload Products</h1>
    
    <div class="info-box">
        <h3>üìã CSV Format Required</h3>
        <p><strong>Your CSV file must have these columns (exact names):</strong></p>
        <pre>name,sku,category,cost_price,selling_price,description
Barolo DOCG 2015,WINE-001,Wine,25.00,55.00,Premium red wine from Piedmont
Prosecco Superiore,WINE-002,Wine,8.00,18.00,Sparkling wine from Valdobbiadene
Craft IPA,BEER-001,Beer,3.50,8.00,India Pale Ale from local brewery
Sari Silk Red,TEX-001,Textiles,18.50,42.00,Premium silk sari from India</pre>
        
        <h4>Column Descriptions:</h4>
        <ul>
            <li><strong>name</strong> - Product name (required)</li>
            <li><strong>sku</strong> - Unique product code (required, will update if exists)</li>
            <li><strong>category</strong> - Product category (e.g., Wine, Beer, Textiles)</li>
            <li><strong>cost_price</strong> - What you paid for it (numbers only, no ‚Ç¨ symbol)</li>
            <li><strong>selling_price</strong> - What you sell it for (numbers only)</li>
            <li><strong>description</strong> - Product details (optional)</li>
        </ul>
    </div>
    
    <div class="warning-box">
        <h4>üí° Tips for Success</h4>
        <ul>
            <li>First row MUST be the header row (column names)</li>
            <li>SKU must be unique - if SKU exists, product will be updated</li>
            <li>Use decimal point for prices (25.50, not 25,50)</li>
            <li>Save your Excel file as CSV (Comma Separated Values)</li>
            <li>Recommended: Test with 5-10 products first</li>
        </ul>
    </div>
    
    <form method="post" enctype="multipart/form-data" class="form-container">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="csv_file">
                Select CSV File:
            </label>
            <input type="file" id="csv_file" name="csv_file" accept=".csv" required>
        </div>
        
        <div class="button-group">
            <button type="submit" class="btn-submit">
                üì§ Upload Products
            </button>
            
            <a href="{% url 'admin:inventory_product_changelist' %}" class="btn-cancel">
                ‚Üê Cancel
            </a>
        </div>
    </form>
    
    <div class="examples-section">
        <h3>üì• Sample CSV Files</h3>
        <p>Download these sample files to see the correct format:</p>
        
        <div style="margin-top: 15px;">
            <strong>Wine & Beer Example:</strong>
            <pre>name,sku,category,cost_price,selling_price,description
Barolo DOCG 2015,WINE-BAR-2015,Red Wine,28.00,65.00,Full-bodied red wine
Chianti Classico 2018,WINE-CHI-2018,Red Wine,12.00,28.00,Traditional Tuscan wine
Prosecco DOC,WINE-PRO-2023,Sparkling,6.50,15.00,Fresh and fruity bubbles
Craft IPA,BEER-IPA-001,Craft Beer,3.50,8.50,Hoppy India Pale Ale
Lager Premium,BEER-LAG-001,Lager,2.80,6.50,Crisp and refreshing</pre>
        </div>
        
        <div style="margin-top: 20px;">
            <strong>Ethnic Products Example:</strong>
            <pre>name,sku,category,cost_price,selling_price,description
Sari Silk Blue,TEX-SARI-BLU,Textiles,15.00,35.00,Handwoven silk sari
Basmati Rice 5kg,FOOD-RICE-5KG,Food,8.00,18.00,Premium aged basmati
Turmeric Powder 500g,SPICE-TUR-500,Spices,3.50,8.00,Organic turmeric
Wooden Mask,CRAFT-MASK-01,Crafts,12.00,30.00,Hand-carved wooden mask
Argan Oil 100ml,COSM-ARG-100,Cosmetics,15.00,35.00,Pure Moroccan argan oil</pre>
        </div>
    </div>
</div>
{% endblock %}
